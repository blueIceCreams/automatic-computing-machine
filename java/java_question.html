<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java开发问题 | 小R谈编程</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/myblog/assets/css/0.styles.33d4ebe4.css" as="style"><link rel="preload" href="/myblog/assets/js/app.2ec99ef4.js" as="script"><link rel="preload" href="/myblog/assets/js/3.9de28f1c.js" as="script"><link rel="preload" href="/myblog/assets/js/19.e1f30831.js" as="script"><link rel="prefetch" href="/myblog/assets/js/10.d4f57499.js"><link rel="prefetch" href="/myblog/assets/js/11.bfa5bc8c.js"><link rel="prefetch" href="/myblog/assets/js/12.838ecb37.js"><link rel="prefetch" href="/myblog/assets/js/13.83798a41.js"><link rel="prefetch" href="/myblog/assets/js/14.7e648c9a.js"><link rel="prefetch" href="/myblog/assets/js/15.a173a2d6.js"><link rel="prefetch" href="/myblog/assets/js/16.f7516a11.js"><link rel="prefetch" href="/myblog/assets/js/17.f0064ca7.js"><link rel="prefetch" href="/myblog/assets/js/18.3998d3de.js"><link rel="prefetch" href="/myblog/assets/js/20.81ce25b5.js"><link rel="prefetch" href="/myblog/assets/js/21.7539047e.js"><link rel="prefetch" href="/myblog/assets/js/22.df5b9553.js"><link rel="prefetch" href="/myblog/assets/js/23.81c34996.js"><link rel="prefetch" href="/myblog/assets/js/24.bdf5819a.js"><link rel="prefetch" href="/myblog/assets/js/4.d6a6f2d9.js"><link rel="prefetch" href="/myblog/assets/js/5.d8e07a22.js"><link rel="prefetch" href="/myblog/assets/js/6.a1bdc27c.js"><link rel="prefetch" href="/myblog/assets/js/7.34369036.js"><link rel="prefetch" href="/myblog/assets/js/8.2ba10528.js"><link rel="prefetch" href="/myblog/assets/js/9.3de0d101.js"><link rel="prefetch" href="/myblog/assets/js/vendors~flowchart.36a6b2b5.js">
    <link rel="stylesheet" href="/myblog/assets/css/0.styles.33d4ebe4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/myblog/" class="home-link router-link-active"><!----> <span class="site-name">小R谈编程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myblog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/java/java_learn.html" class="nav-link">
  Java学习笔记
</a></li><li class="dropdown-item"><!----> <a href="/myblog/java/java_question.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Java问题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/java/java_timerTask.html" class="nav-link">
  Java定时程序
</a></li><li class="dropdown-item"><!----> <a href="/myblog/java/maven.html" class="nav-link">
  maven
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web" class="mobile-dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/web/web.html" class="nav-link">
  web基础
</a></li><li class="dropdown-item"><!----> <a href="/myblog/web/javascript.html" class="nav-link">
  javascript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Hadoop" class="dropdown-title"><span class="title">Hadoop</span> <span class="arrow down"></span></button> <button type="button" aria-label="Hadoop" class="mobile-dropdown-title"><span class="title">Hadoop</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/hadoop/hadoop_install.html" class="nav-link">
  Hadoop安装
</a></li><li class="dropdown-item"><!----> <a href="/myblog/hadoop/hadoop_base.html" class="nav-link">
  Hadoop入门
</a></li><li class="dropdown-item"><!----> <a href="/myblog/hadoop/hadoop_hdfs.html" class="nav-link">
  HDFS
</a></li></ul></div></div><div class="nav-item"><a href="/myblog/linux/linux_base.html" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/myblog/docker/docker.html" class="nav-link">
  docker
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="others" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="others" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/codemanage/codemanage_README.html" class="nav-link">
  代码管理
</a></li><li class="dropdown-item"><!----> <a href="/myblog/codemanage/vuepress_learn.html" class="nav-link">
  vuepress
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/myblog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/java/java_learn.html" class="nav-link">
  Java学习笔记
</a></li><li class="dropdown-item"><!----> <a href="/myblog/java/java_question.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Java问题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/java/java_timerTask.html" class="nav-link">
  Java定时程序
</a></li><li class="dropdown-item"><!----> <a href="/myblog/java/maven.html" class="nav-link">
  maven
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web" class="mobile-dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/web/web.html" class="nav-link">
  web基础
</a></li><li class="dropdown-item"><!----> <a href="/myblog/web/javascript.html" class="nav-link">
  javascript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Hadoop" class="dropdown-title"><span class="title">Hadoop</span> <span class="arrow down"></span></button> <button type="button" aria-label="Hadoop" class="mobile-dropdown-title"><span class="title">Hadoop</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/hadoop/hadoop_install.html" class="nav-link">
  Hadoop安装
</a></li><li class="dropdown-item"><!----> <a href="/myblog/hadoop/hadoop_base.html" class="nav-link">
  Hadoop入门
</a></li><li class="dropdown-item"><!----> <a href="/myblog/hadoop/hadoop_hdfs.html" class="nav-link">
  HDFS
</a></li></ul></div></div><div class="nav-item"><a href="/myblog/linux/linux_base.html" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/myblog/docker/docker.html" class="nav-link">
  docker
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="others" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="others" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/codemanage/codemanage_README.html" class="nav-link">
  代码管理
</a></li><li class="dropdown-item"><!----> <a href="/myblog/codemanage/vuepress_learn.html" class="nav-link">
  vuepress
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java开发问题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/java/java_question.html#对象的深拷贝" class="sidebar-link">对象的深拷贝</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#下载远程文件-获取文件流" class="sidebar-link">下载远程文件(获取文件流)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#上传文件到ftp时内容为空" class="sidebar-link">上传文件到FTP时内容为空</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#单元测试类加注解" class="sidebar-link">单元测试类加注解</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#servlet通过ajax返回json字符串" class="sidebar-link">Servlet通过Ajax返回Json字符串</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#cookie中文异常" class="sidebar-link">Cookie中文异常</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#simpledateformat" class="sidebar-link">SimpleDateFormat</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#controller参数对象不存在空指针" class="sidebar-link">Controller参数对象不存在空指针</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#finally与return的执行" class="sidebar-link">finally与return的执行</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#引用的传递性" class="sidebar-link">引用的传递性</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#使用集合的add方法坑点" class="sidebar-link">使用集合的add方法坑点</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#方法内部类" class="sidebar-link">方法内部类</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#静态内部类" class="sidebar-link">静态内部类</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#关于指定javabean中属性json化的属性名" class="sidebar-link">关于指定JavaBean中属性Json化的属性名</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#循环执行数据库操作" class="sidebar-link">循环执行数据库操作</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#字符串值的比较" class="sidebar-link">字符串值的比较</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#遍历map的几种方法" class="sidebar-link">遍历map的几种方法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#使用foreach遍历map时操作map会报错" class="sidebar-link">使用foreach遍历map时操作map会报错</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#重写tostring方法的建议" class="sidebar-link">重写toString方法的建议</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#字符串拼接引起的性能消耗" class="sidebar-link">字符串拼接引起的性能消耗</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#xxl-job框架" class="sidebar-link">xxl-Job框架</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#关于线程池的创建" class="sidebar-link">关于线程池的创建</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#单例模块坑" class="sidebar-link">单例模块坑</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#关于select-坑点" class="sidebar-link">关于select * 坑点</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_question.html#字符串不足位时补空格" class="sidebar-link">字符串不足位时补空格</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="对象的深拷贝"><a href="#对象的深拷贝" class="header-anchor">#</a> 对象的深拷贝</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">copyEntity</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> entity<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token class-name">T</span> t <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token keyword">try</span><span class="token punctuation">(</span><span class="token class-name">ByteArrayOutputStream</span> baos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">try</span><span class="token punctuation">(</span><span class="token class-name">ByteArrayInputStream</span> bais <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>baos<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span>bais<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			t <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span>ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
		logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;copy entity failure.&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> t<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="下载远程文件-获取文件流"><a href="#下载远程文件-获取文件流" class="header-anchor">#</a> 下载远程文件(获取文件流)</h2> <ul><li>问题描述：Java程序中下载远程文件，获取文件流。</li> <li>解决方案：</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">HttpURLConnection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">try</span><span class="token punctuation">{</span>
	<span class="token class-name">URL</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&quot;http://....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	conn <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpURLConnection</span><span class="token punctuation">)</span>url<span class="token punctuation">.</span><span class="token function">openConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 设置连接超时时限</span>
	conn<span class="token punctuation">.</span><span class="token function">setConnectionTimeout</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 复制屏蔽程序抓取而返回403错误</span>
	conn<span class="token punctuation">.</span><span class="token function">setRequestProperty</span><span class="token punctuation">(</span><span class="token string">&quot;User-Agent&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Mozilla/4.0 (compatible; MSIE 5.0; Windows NT; DigExt)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 获取文件流</span>
	<span class="token class-name">InputStream</span> fileStream <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
	logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;copy entity failure.&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> conn<span class="token punctuation">)</span><span class="token punctuation">{</span>
		conn<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="上传文件到ftp时内容为空"><a href="#上传文件到ftp时内容为空" class="header-anchor">#</a> 上传文件到FTP时内容为空</h2> <ul><li>问题描述：Java传文件到FTP服务器时出现创建文件成功但内容没有成功写入、文件大小为0字节的情况。</li> <li>解决方案：</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 加上此代码，开启被动传输模式</span>
ftpClient<span class="token punctuation">.</span><span class="token function">enterLocalPassiveMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="单元测试类加注解"><a href="#单元测试类加注解" class="header-anchor">#</a> 单元测试类加注解</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@WebAppConfiguration</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>locations <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;classpath:config/spring/nuts-spring-context.xml&quot;</span><span class="token punctuation">,</span>
								   <span class="token string">&quot;classpath:config/platform/desktop-datasource-jdbc.xml&quot;</span><span class="token punctuation">,</span>
								   <span class="token string">&quot;classpath:config/xxx/xxx-datasource-jdbc.xml&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="servlet通过ajax返回json字符串"><a href="#servlet通过ajax返回json字符串" class="header-anchor">#</a> Servlet通过Ajax返回Json字符串</h2> <div class="language-java extra-class"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/json;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">PrintWriter</span> writer <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;Json字符串&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="cookie中文异常"><a href="#cookie中文异常" class="header-anchor">#</a> Cookie中文异常</h2> <ul><li>若Cookie的键值对存入的包含中文，需先使用URLEncoder编码，否则会抛出IllegalArgumentException.</li></ul> <h2 id="simpledateformat"><a href="#simpledateformat" class="header-anchor">#</a> SimpleDateFormat</h2> <ul><li>SimpleDateFormat最好是定义为静态（单线程下），因为其线程不安全</li> <li>若存在多线程问题，可使用ThreadLocal或使用DateTimeFormatter</li></ul> <h2 id="controller参数对象不存在空指针"><a href="#controller参数对象不存在空指针" class="header-anchor">#</a> Controller参数对象不存在空指针</h2> <ul><li>Controller层的方法参数若为JavaBean对象且前台不传参数，那么该对象默认调用一个构造函数来初始化，故该对象不为空</li></ul> <h2 id="finally与return的执行"><a href="#finally与return的执行" class="header-anchor">#</a> finally与return的执行</h2> <ul><li>finally语句块不一定会被执行</li> <li>finally语句块在try/catch语句块中的return语句之前执行</li> <li>finally语句块的return语句会覆盖try块中的return返回</li></ul> <h2 id="引用的传递性"><a href="#引用的传递性" class="header-anchor">#</a> 引用的传递性</h2> <ul><li>若List的泛型类型为对象，那么调用List的get方法返回的是对象引用。若将此对象引用赋给另一个变量，那么对变量的任意修改都会同步到List中</li></ul> <h2 id="使用集合的add方法坑点"><a href="#使用集合的add方法坑点" class="header-anchor">#</a> 使用集合的add方法坑点</h2> <ul><li>使用集合的add(int index, Object ele)方法时要注意原集合的size。如原size为1，调用add方法时index却是大于等于size，那么就会报错。</li></ul> <h2 id="方法内部类"><a href="#方法内部类" class="header-anchor">#</a> 方法内部类</h2> <ul><li>方法中定义的内部类只能访问方法中的final类型的局部变量</li></ul> <h2 id="静态内部类"><a href="#静态内部类" class="header-anchor">#</a> 静态内部类</h2> <ul><li>用static声明的内部类不能访问非static的外部类属性</li></ul> <h2 id="关于指定javabean中属性json化的属性名"><a href="#关于指定javabean中属性json化的属性名" class="header-anchor">#</a> 关于指定JavaBean中属性Json化的属性名</h2> <ul><li>使用@JSONField可规定JavaBean中成员变量在Json字符串中的别名</li></ul> <h2 id="循环执行数据库操作"><a href="#循环执行数据库操作" class="header-anchor">#</a> 循环执行数据库操作</h2> <ul><li>尽量避免在循环中执行数据库操作，可考虑使用批量操作方式，这样可降低对数据库性能的消耗</li></ul> <h2 id="字符串值的比较"><a href="#字符串值的比较" class="header-anchor">#</a> 字符串值的比较</h2> <ul><li>字符串值的比较应用equals，而不能用==</li> <li>String类的equals是有被重写的，可按字符串内容来比较</li> <li>==比较的是对象的地址。类默认的equals方法是使用==来比较的，故自定义JavaBean在使用equals方法时需重写equals方法</li></ul> <h2 id="遍历map的几种方法"><a href="#遍历map的几种方法" class="header-anchor">#</a> 遍历map的几种方法</h2> <ol><li>遍历key，通过key取出value</li> <li>遍历value</li> <li>使用Map.Entry（推荐），如Map.Entry&lt;?,?&gt; entry:map.entrySet()</li> <li>使用Lambda，性能低于EntrySet, 如map.forEach((key, value)-&gt;{...});</li></ol> <h2 id="使用foreach遍历map时操作map会报错"><a href="#使用foreach遍历map时操作map会报错" class="header-anchor">#</a> 使用foreach遍历map时操作map会报错</h2> <ul><li>使用foreach遍历map时操作map会报错 - java.util.ConcurrentModificationException</li> <li>可使用Iterator来实现边遍历边修改map</li></ul> <h2 id="重写tostring方法的建议"><a href="#重写tostring方法的建议" class="header-anchor">#</a> 重写toString方法的建议</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// JavaBean重写toString的方法最好是使用JSON转换</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="字符串拼接引起的性能消耗"><a href="#字符串拼接引起的性能消耗" class="header-anchor">#</a> 字符串拼接引起的性能消耗</h2> <ul><li>以连续加的方式来实现字符串的拼接会导致创建过多的字符串对象。</li> <li>最好使用StringBuilder(线程安全情况下使用)或StringBuffer(线程不安全情况下使用)</li></ul> <h2 id="xxl-job框架"><a href="#xxl-job框架" class="header-anchor">#</a> xxl-Job框架</h2> <ul><li>有需要对定时任务执行情况有很好的掌握时可使用xxl-Job框架</li></ul> <h2 id="关于线程池的创建"><a href="#关于线程池的创建" class="header-anchor">#</a> 关于线程池的创建</h2> <ul><li>不要直接使用Executors去创建线程池，最好使用单例模式。即在getExecutors方法中先判断ExecutorService对象是否为空或已shutdown，是的话对ThreadFactory.class进行同步(synchronized)，再次判空或是否已shutdown，是的话使用new ThreadPoolExecutor来创建ExecutorService对象,最后返回即可。</li></ul> <h2 id="单例模块坑"><a href="#单例模块坑" class="header-anchor">#</a> 单例模块坑</h2> <ul><li>单例模式下对成员变量进行操作是线程不安全的</li></ul> <h2 id="关于select-坑点"><a href="#关于select-坑点" class="header-anchor">#</a> 关于select * 坑点</h2> <ul><li>sql语句中直接使用select * 会引发效率问题。</li> <li>因其需先去查表有哪些列，然后才去查列内容。故改*为所要查询的列会比较好</li></ul> <h2 id="字符串不足位时补空格"><a href="#字符串不足位时补空格" class="header-anchor">#</a> 字符串不足位时补空格</h2> <ul><li>若字符串不足10位，将在字符串 “后面” 补充空格；其他情况直接得到原字符串</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%1$-10s&quot;</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span>
</code></pre></div><ul><li>若字符串不足6位，将在字符串 “前面” 补充空格；其他情况直接得到原字符串</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%6s&quot;</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/myblog/assets/js/app.2ec99ef4.js" defer></script><script src="/myblog/assets/js/3.9de28f1c.js" defer></script><script src="/myblog/assets/js/19.e1f30831.js" defer></script>
  </body>
</html>
