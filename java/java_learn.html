<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java学习笔记 | 小R谈编程</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/myblog/assets/css/0.styles.33d4ebe4.css" as="style"><link rel="preload" href="/myblog/assets/js/app.2ec99ef4.js" as="script"><link rel="preload" href="/myblog/assets/js/3.9de28f1c.js" as="script"><link rel="preload" href="/myblog/assets/js/18.3998d3de.js" as="script"><link rel="prefetch" href="/myblog/assets/js/10.d4f57499.js"><link rel="prefetch" href="/myblog/assets/js/11.bfa5bc8c.js"><link rel="prefetch" href="/myblog/assets/js/12.838ecb37.js"><link rel="prefetch" href="/myblog/assets/js/13.83798a41.js"><link rel="prefetch" href="/myblog/assets/js/14.7e648c9a.js"><link rel="prefetch" href="/myblog/assets/js/15.a173a2d6.js"><link rel="prefetch" href="/myblog/assets/js/16.f7516a11.js"><link rel="prefetch" href="/myblog/assets/js/17.f0064ca7.js"><link rel="prefetch" href="/myblog/assets/js/19.e1f30831.js"><link rel="prefetch" href="/myblog/assets/js/20.81ce25b5.js"><link rel="prefetch" href="/myblog/assets/js/21.7539047e.js"><link rel="prefetch" href="/myblog/assets/js/22.df5b9553.js"><link rel="prefetch" href="/myblog/assets/js/23.81c34996.js"><link rel="prefetch" href="/myblog/assets/js/24.bdf5819a.js"><link rel="prefetch" href="/myblog/assets/js/4.d6a6f2d9.js"><link rel="prefetch" href="/myblog/assets/js/5.d8e07a22.js"><link rel="prefetch" href="/myblog/assets/js/6.a1bdc27c.js"><link rel="prefetch" href="/myblog/assets/js/7.34369036.js"><link rel="prefetch" href="/myblog/assets/js/8.2ba10528.js"><link rel="prefetch" href="/myblog/assets/js/9.3de0d101.js"><link rel="prefetch" href="/myblog/assets/js/vendors~flowchart.36a6b2b5.js">
    <link rel="stylesheet" href="/myblog/assets/css/0.styles.33d4ebe4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/myblog/" class="home-link router-link-active"><!----> <span class="site-name">小R谈编程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myblog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/java/java_learn.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Java学习笔记
</a></li><li class="dropdown-item"><!----> <a href="/myblog/java/java_question.html" class="nav-link">
  Java问题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/java/java_timerTask.html" class="nav-link">
  Java定时程序
</a></li><li class="dropdown-item"><!----> <a href="/myblog/java/maven.html" class="nav-link">
  maven
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web" class="mobile-dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/web/web.html" class="nav-link">
  web基础
</a></li><li class="dropdown-item"><!----> <a href="/myblog/web/javascript.html" class="nav-link">
  javascript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Hadoop" class="dropdown-title"><span class="title">Hadoop</span> <span class="arrow down"></span></button> <button type="button" aria-label="Hadoop" class="mobile-dropdown-title"><span class="title">Hadoop</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/hadoop/hadoop_install.html" class="nav-link">
  Hadoop安装
</a></li><li class="dropdown-item"><!----> <a href="/myblog/hadoop/hadoop_base.html" class="nav-link">
  Hadoop入门
</a></li><li class="dropdown-item"><!----> <a href="/myblog/hadoop/hadoop_hdfs.html" class="nav-link">
  HDFS
</a></li></ul></div></div><div class="nav-item"><a href="/myblog/linux/linux_base.html" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/myblog/docker/docker.html" class="nav-link">
  docker
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="others" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="others" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/codemanage/codemanage_README.html" class="nav-link">
  代码管理
</a></li><li class="dropdown-item"><!----> <a href="/myblog/codemanage/vuepress_learn.html" class="nav-link">
  vuepress
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/myblog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/java/java_learn.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Java学习笔记
</a></li><li class="dropdown-item"><!----> <a href="/myblog/java/java_question.html" class="nav-link">
  Java问题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/java/java_timerTask.html" class="nav-link">
  Java定时程序
</a></li><li class="dropdown-item"><!----> <a href="/myblog/java/maven.html" class="nav-link">
  maven
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web" class="mobile-dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/web/web.html" class="nav-link">
  web基础
</a></li><li class="dropdown-item"><!----> <a href="/myblog/web/javascript.html" class="nav-link">
  javascript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Hadoop" class="dropdown-title"><span class="title">Hadoop</span> <span class="arrow down"></span></button> <button type="button" aria-label="Hadoop" class="mobile-dropdown-title"><span class="title">Hadoop</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/hadoop/hadoop_install.html" class="nav-link">
  Hadoop安装
</a></li><li class="dropdown-item"><!----> <a href="/myblog/hadoop/hadoop_base.html" class="nav-link">
  Hadoop入门
</a></li><li class="dropdown-item"><!----> <a href="/myblog/hadoop/hadoop_hdfs.html" class="nav-link">
  HDFS
</a></li></ul></div></div><div class="nav-item"><a href="/myblog/linux/linux_base.html" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/myblog/docker/docker.html" class="nav-link">
  docker
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="others" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="others" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/codemanage/codemanage_README.html" class="nav-link">
  代码管理
</a></li><li class="dropdown-item"><!----> <a href="/myblog/codemanage/vuepress_learn.html" class="nav-link">
  vuepress
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java学习笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/java/java_learn.html#servlet的匹配顺序" class="sidebar-link">Servlet的匹配顺序</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_learn.html#servlet的加载" class="sidebar-link">Servlet的加载</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_learn.html#自定义类加载器的应用场景" class="sidebar-link">自定义类加载器的应用场景</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_learn.html#classloader类加载器" class="sidebar-link">ClassLoader类加载器</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_learn.html#基于分代的垃圾收集算法" class="sidebar-link">基于分代的垃圾收集算法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_learn.html#jvm中的堆分区" class="sidebar-link">JVM中的堆分区</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_learn.html#java中的编码类" class="sidebar-link">Java中的编码类</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_learn.html#序列化-serializable" class="sidebar-link">序列化 Serializable</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_learn.html#两种buffer比较" class="sidebar-link">两种Buffer比较</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_learn.html#log4j使用步骤" class="sidebar-link">log4j使用步骤</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_learn.html#jvm加载class文件至内存的2种方式" class="sidebar-link">JVM加载class文件至内存的2种方式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_learn.html#classloader加载class文件至jvm的过程" class="sidebar-link">ClassLoader加载class文件至JVM的过程</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myblog/java/java_learn.html#jvm按需加载" class="sidebar-link">JVM按需加载</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="servlet的匹配顺序"><a href="#servlet的匹配顺序" class="header-anchor">#</a> Servlet的匹配顺序</h2> <ol><li>精确匹配</li> <li>最长路径匹配</li> <li>根据后缀进行匹配</li></ol> <h2 id="servlet的加载"><a href="#servlet的加载" class="header-anchor">#</a> Servlet的加载</h2> <ul><li>应用在Tomcat中由一个StandardContext表示，由StandardContext来解析web.xml，从而实例化Servlet。而负责加载Servlet的是WebappClassLoader。下面展示其寻找加载过程：</li></ul> <div class="vuepress-flowchart loading vue"><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 30 30" class="vuepress-flowchart-loading-icon" style="enable-background:new 0 0 50 50;"><rect x="0" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0s" dur="0.6s" repeatCount="indefinite"></animate> <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0s" dur="0.6s" repeatCount="indefinite"></animate></rect> <rect x="10" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate> <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate></rect> <rect x="20" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate> <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate></rect></svg></div><h2 id="自定义类加载器的应用场景"><a href="#自定义类加载器的应用场景" class="header-anchor">#</a> 自定义类加载器的应用场景</h2> <ul><li>需加载classpath之外的某特定路径的.class文件</li> <li>需加载由网络传输过来的.class文件（可能有加密）</li> <li>需实现热部署（如利用不同的ClassLoader实例加载同一个.class文件，在内存中创建出不同的类实例对象）</li></ul> <h2 id="classloader类加载器"><a href="#classloader类加载器" class="header-anchor">#</a> ClassLoader类加载器</h2> <ul><li>BootStrap: 主要加载JVM自身工作需要的类，负责将&lt;JAVA_HOME&gt;/lib下的核心类库或-Xbootclasspath参数指定路径下的jar包加载到内存中，此类使用C++实现，无父类和子类</li> <li>ExtClassLoader: 由Java实现，是Launcher的静态内部类，无父类
负责加载&lt;JAVA_HOME&gt;/lib/bin目录下或-Djava.ext.dir指定路径下的类库</li> <li>AppClassLoader: 父类是ExtClassLoader,负责加载classpath路径下的类库，getSystemClassLoader方法获取的就是此类，且此类作为所有用户自定义类加载器的父类</li></ul> <h2 id="基于分代的垃圾收集算法"><a href="#基于分代的垃圾收集算法" class="header-anchor">#</a> 基于分代的垃圾收集算法</h2> <p>基于分代的垃圾收集算法设计思路：把对象按寿命长短分组，分为年轻代和年老代。新创建的对象被分在年轻代。如果对象经过几次回收后仍然存活，那么再把这个对象划分到年老代。年老代的收集频率不像年轻代那么频繁，这样就减少了每次垃圾收集时所要扫描的对象数量，从而提高了垃圾回收效率</p> <h2 id="jvm中的堆分区"><a href="#jvm中的堆分区" class="header-anchor">#</a> JVM中的堆分区</h2> <ul><li><p>JVM将整个堆划分为Young区、Old区、Perm区</p></li> <li><p>Young区又分为Eden区和2给个Survivor区。其中所有新创建的对象都在Eden区。当Eden区满后会触发minor GC，将Eden区仍然存活的对象复制到其中一个Survivor区，另一个Survivor区中存活的对象也会复制到这个Survivor区，即保证始终有一个Survivor区是空的。</p></li> <li><p>Old区存放的是Young区的Survivor区满后触发minor GC后仍然存活的对象。如果在Survivor区的对象足够老，也可直接存放到Old区。如果Old区满了或者即将要进入Old区的对象大小大于Old区的剩余空间，那么将触发Full GC，Full GC 会检查Heap堆中的所有对象，清空所有垃圾对象。</p></li> <li><p>Perm区存放的是类的Class对象。若Perm区满了或空间不足，将由Full GC进行垃圾回收，清除已被卸载的ClassLoader中加载的类的信息。</p></li> <li><p>JVM在进行GC时由于是串行的，故在JVM的其他应用程序都会暂停.</p></li></ul> <h2 id="java中的编码类"><a href="#java中的编码类" class="header-anchor">#</a> Java中的编码类</h2> <ul><li>从字节到字符的解码实现类：streamDecoder</li> <li>从字符到字节的编码实现类： streamEncoder</li></ul> <h2 id="序列化-serializable"><a href="#序列化-serializable" class="header-anchor">#</a> 序列化 Serializable</h2> <ul><li>FileDescriptor： 一个关联真实存在的磁盘文件的文件描述符，可通过此对象直接控制磁盘文件</li> <li>Java序列化就是将一个对象转化为一串二进制表示的字节数组，通过保存或转移这些字节数据来达到持久化的目的。</li> <li>当父类都实现了Serializable接口时，所有的子类都可被序列化</li> <li>子类实现了Serializable接口而父类没有实现，那么只有子类中的属性能被正确序列化。而父类中的属性数据会丢失，不报错。</li> <li>若序列化的属性是对象，那么该对象对应的类必须实现Serializable接口，否则会报错。</li></ul> <h2 id="两种buffer比较"><a href="#两种buffer比较" class="header-anchor">#</a> 两种Buffer比较</h2> <table><thead><tr><th style="text-align:center;">------</th> <th>HeapByteBuffer</th> <th>DirectByteBuffer</th></tr></thead> <tbody><tr><td style="text-align:center;">存储位置</td> <td>Java Heap中</td> <td>Native内存中</td></tr> <tr><td style="text-align:center;">I/O</td> <td>需要在用户地址空间和操作系统内核地址空间复制数据</td> <td>无需复制</td></tr> <tr><td style="text-align:center;">内存管理</td> <td>由Java GC回收，创建、回收开销少</td> <td>通过System.gc()释放所引用的内存；若Java对象长期持有引用或导致Native内存泄漏；创建、回收开销大</td></tr> <tr><td style="text-align:center;">适用场景</td> <td>并发连接数少于1000，I/O操作较少</td> <td>数据量较大、生命周期较长的情况</td></tr></tbody></table> <h2 id="log4j使用步骤"><a href="#log4j使用步骤" class="header-anchor">#</a> log4j使用步骤</h2> <ol><li>导入jar包： log4j-***.jar  slf4j-api-***.jar  slf4j-log4j12-***.jar</li> <li>在src下创建log4j.properties文件，文件内容如下</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code>log4j.rootCategory=DEBUG,CONSOLE
log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
log4j.appender.CONSOLE.Threshold=DEBUG
log4j.appender.CONSOLE.Target=System.out
log4j.appender.CONSOLE.Encoding=UTF-8
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern=[ProjectName]%-5p %d{yyyy-MM-dd HH\:mm\:ss} - %c[%t] - %m%n
</code></pre></div><h2 id="jvm加载class文件至内存的2种方式"><a href="#jvm加载class文件至内存的2种方式" class="header-anchor">#</a> JVM加载class文件至内存的2种方式</h2> <ol><li>隐式加载：不通过代码中调用ClassLoader加载，而是由JVM自动加载所需的类。如在类中继承了某类，JVM解析此类时发现所继承的类不在内存中，就会自动将这些父类加载至内存中</li> <li>显式加载：直接在代码中调用ClassLoader加载类。
<ul><li>如调用this.getClass().getClassLoader().loadClass()</li> <li>Class.forName()</li> <li>调用自定义ClassLoader类的findClass方法</li></ul></li></ol> <h2 id="classloader加载class文件至jvm的过程"><a href="#classloader加载class文件至jvm的过程" class="header-anchor">#</a> ClassLoader加载class文件至JVM的过程</h2> <div class="vuepress-flowchart loading vue"><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 30 30" class="vuepress-flowchart-loading-icon" style="enable-background:new 0 0 50 50;"><rect x="0" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0s" dur="0.6s" repeatCount="indefinite"></animate> <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0s" dur="0.6s" repeatCount="indefinite"></animate></rect> <rect x="10" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate> <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate></rect> <rect x="20" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate> <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate></rect></svg></div><h2 id="jvm按需加载"><a href="#jvm按需加载" class="header-anchor">#</a> JVM按需加载</h2> <ul><li>JVM对class文件采用的是按需加载方式。在加载时，JVM采用的是双亲委派模式。</li> <li>该模式中的父子关系并非继承关系，而是采用组合关系来复用父类加载器的相关代码。</li> <li>工作原理：当一个类加载器收到一个类加载请求，会先将此请求委托给父类加载器，若父类加载器还有上层父类，就继续往上i委托，直到顶层类加载器。一旦上层类加载器可完成或已完成加载，则成功返回；若不能，将由子类加载器去尝试加载。</li> <li>此模式的好处是避免类的重复加载，以及防止核心API库被篡改，提供一定的安全。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/myblog/assets/js/app.2ec99ef4.js" defer></script><script src="/myblog/assets/js/3.9de28f1c.js" defer></script><script src="/myblog/assets/js/18.3998d3de.js" defer></script>
  </body>
</html>
