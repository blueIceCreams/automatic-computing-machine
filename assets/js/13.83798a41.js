(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{299:function(t,s,a){"use strict";a.r(s);var e=a(6),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"日期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#日期"}},[t._v("#")]),t._v(" 日期")]),t._v(" "),s("ul",[s("li",[t._v("日期可加减数字，数字默认为天")]),t._v(" "),s("li",[t._v("日期之间只可减不可加")])]),t._v(" "),s("h2",{attrs:{id:"字符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字符"}},[t._v("#")]),t._v(" 字符")]),t._v(" "),s("ul",[s("li",[t._v("字符不能加减")])]),t._v(" "),s("h2",{attrs:{id:"通配符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通配符"}},[t._v("#")]),t._v(" 通配符")]),t._v(" "),s("ul",[s("li",[t._v("要将通配符作为正常字符使用，可使用escape")])]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 匹配名字以骁_为前缀的学生信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" tb_student "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("like")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'骁/_%'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("escape")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n")])])]),s("h2",{attrs:{id:"排序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#排序"}},[t._v("#")]),t._v(" 排序")]),t._v(" "),s("ul",[s("li",[t._v("排序时，空值作为无穷大来处理")]),t._v(" "),s("li",[t._v("一般先排序再运算，故group by 子句中的字段可不出现在查询列中")])]),t._v(" "),s("h2",{attrs:{id:"空值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#空值"}},[t._v("#")]),t._v(" 空值")]),t._v(" "),s("ul",[s("li",[t._v("排序时，空值作为无穷大来处理")]),t._v(" "),s("li",[t._v("AVG和SUM函数都会忽略列中的空值")])]),t._v(" "),s("h2",{attrs:{id:"group-by报错"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#group-by报错"}},[t._v("#")]),t._v(" group by报错")]),t._v(" "),s("ul",[s("li",[t._v("问题描述：SQL报‘不是group by 表达式’")]),t._v(" "),s("li",[t._v("解决方案：两种检查思路\n"),s("ul",[s("li",[t._v("group by 子句中不能使用别名")]),t._v(" "),s("li",[t._v("SELECT 列表项中除了聚合函数外，其余的列都必须出现在group by 子句")])])])]),t._v(" "),s("h2",{attrs:{id:"仅复制表结构语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#仅复制表结构语法"}},[t._v("#")]),t._v(" 仅复制表结构语法")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" new_tb "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" old_tb "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n")])])]),s("h2",{attrs:{id:"truncate、delete"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#truncate、delete"}},[t._v("#")]),t._v(" TRUNCATE、DELETE")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("关键词")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("区别")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("TRUNCATE")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("会删除表的所有数据，无法回滚，会释放存储空间")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("DELETE")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("会删除表中所有行，可以回滚，不会释放存储空间")])])])]),t._v(" "),s("h2",{attrs:{id:"外键引发的级联删除"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#外键引发的级联删除"}},[t._v("#")]),t._v(" 外键引发的级联删除")]),t._v(" "),s("ul",[s("li",[t._v("默认情况下主表数据删除时，若有外键关联的参照表数据存在，是不允许删除的。")]),t._v(" "),s("li",[t._v("Oracle提供了两种方式：\n"),s("ul",[s("li",[t._v("ON DELETE CASCADE 会在主表的行被删除时，将子表中参照主表的行删除")]),t._v(" "),s("li",[t._v("ON DELETE SET NULL 会在主表的行被删除时，将子表中的参照值设置为NULL")])])])]),t._v(" "),s("h2",{attrs:{id:"条件判断语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#条件判断语法"}},[t._v("#")]),t._v(" 条件判断语法")]),t._v(" "),s("ul",[s("li",[t._v("case 表达式 when 条件1 then 返回值1 when 条件2 then 返回值2 ... else 返回值 end")]),t._v(" "),s("li",[t._v("decode (表达式, 条件1, 返回值1, 条件2, 返回值2, ... 返回值)")])]),t._v(" "),s("h2",{attrs:{id:"将多条记录合为同一条记录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将多条记录合为同一条记录"}},[t._v("#")]),t._v(" 将多条记录合为同一条记录")]),t._v(" "),s("p",[t._v("如：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("IDCARD")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("MOBILE")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("441233344455556666")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("15610000000")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("441233344455556666")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("13699009900")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("456788944464334666")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("15610000000")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("456788944464334666")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("13699009900")])])])]),t._v(" "),s("p",[t._v("转为")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("IDCARD")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("MOBILE_LIST")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("441233344455556666")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("15610000000,13699009900")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("456788944464334666")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("15610000000,13699009900")])])])]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" IDCARD"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" listagg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MOBILE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("','")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("within")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("order")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" IDCARD"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" MOBILE_LIST\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" table_name "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("group")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" IDCARD"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"查询树状结果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查询树状结果"}},[t._v("#")]),t._v(" 查询树状结果")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 查询指定PID下的机构树")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" ID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" PID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" NAME "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" tb_unit_info "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("start")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" PID"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("? "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("connect")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" prior ID"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("PID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"时间转换"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#时间转换"}},[t._v("#")]),t._v(" 时间转换")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 将绝对秒转为时间")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" to_char"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1590571625")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" to_date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1970-01-01 08:00:00'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YYYY-MM-DD HH24:MI:SS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YYYY-MM-DD HH24:MI:SS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" dual"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 将绝对秒转为YYYYMMDD")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" to_number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to_char"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1590571625")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" to_date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1970-01-01 08:00:00'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YYYY-MM-DD \nHH24:MI:SS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YYYYMMDD'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" dual"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 获取绝对秒中的小时数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" to_number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to_char"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1590571625")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" to_date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1970-01-01 08:00:00'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YYYY-MM-DD \nHH24:MI:SS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'HH24'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" dual"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 将时间转为绝对秒")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" to_number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to_date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2020-05-27 17:27:05'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YYYY-MM-DD HH24:MI:SS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" \nto_date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1970-01-01 08:00:00'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YYYY-MM-DD HH24:MI:SS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" dual"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);